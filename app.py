character_sections = {
            "A": [
        ("101 Dalmatians", "https://www.4sgm.com/lsearch.jhtm?cid=&noKeywords=true&keywords=&minPrice=&maxPrice=&facetNameValue=Licensed+Characters_value_101+Dalmatians"),
        ("Aladdin", "https://www.4sgm.com/lsearch.jhtm?cid=&noKeywords=true&keywords=&minPrice=&maxPrice=&facetNameValue=Licensed+Characters_value_Aladdin"),
        ("Animal Crossing", "https://www.4sgm.com/lsearch.jhtm?cid=&noKeywords=true&keywords=&minPrice=&maxPrice=&facetNameValue=Licensed+Characters_value_Animal+Crossing"),
        ("Ant-Man", "https://www.4sgm.com/lsearch.jhtm?cid=&noKeywords=true&keywords=&minPrice=&maxPrice=&facetNameValue=Licensed+Characters_value_Ant-Man"),
        ("Avengers", "https://www.4sgm.com/lsearch.jhtm?cid=&noKeywords=true&keywords=&minPrice=&maxPrice=&facetNameValue=Licensed+Characters_value_Avengers")
    ],
    "B": [
        ("Barbie", "https://www.4sgm.com/lsearch.jhtm?cid=&noKeywords=true&keywords=&minPrice=&maxPrice=&facetNameValue=Licensed+Characters_value_Barbie"),
        ("Batman", "https://www.4sgm.com/lsearch.jhtm?cid=&noKeywords=true&keywords=&minPrice=&maxPrice=&facetNameValue=Licensed+Characters_value_Batman"),
        ("Beauty", "https://www.4sgm.com/lsearch.jhtm?cid=&noKeywords=true&keywords=&minPrice=&maxPrice=&facetNameValue=Licensed+Characters_value_Beauty"),
        ("Belle", "https://www.4sgm.com/lsearch.jhtm?cid=&noKeywords=true&keywords=&minPrice=&maxPrice=&facetNameValue=Licensed+Characters_value_Belle"),
        ("Black Panther", "https://www.4sgm.com/lsearch.jhtm?cid=&noKeywords=true&keywords=&minPrice=&maxPrice=&facetNameValue=Licensed+Characters_value_Black+Panther"),
        ("Black Widow", "https://www.4sgm.com/lsearch.jhtm?cid=&noKeywords=true&keywords=&minPrice=&maxPrice=&facetNameValue=Licensed+Characters_value_Black+Widow"),
        ("Blue's Clues", "https://www.4sgm.com/lsearch.jhtm?cid=&noKeywords=true&keywords=&minPrice=&maxPrice=&facetNameValue=Licensed+Characters_value_Blue's+Clues"),
        ("Bluey", "https://www.4sgm.com/lsearch.jhtm?cid=&noKeywords=true&keywords=&minPrice=&maxPrice=&facetNameValue=Licensed+Characters_value_Bluey"),
        ("Bunnies", "https://www.4sgm.com/lsearch.jhtm?cid=&noKeywords=true&keywords=&minPrice=&maxPrice=&facetNameValue=Licensed+Characters_value_Bunnies")
    ],
    "C": [
        ("Captain America", "https://www.4sgm.com/lsearch.jhtm?cid=&noKeywords=true&keywords=&minPrice=&maxPrice=&facetNameValue=Licensed+Characters_value_Captain+America"),
        ("Captain Marvel", "https://www.4sgm.com/lsearch.jhtm?cid=&noKeywords=true&keywords=&minPrice=&maxPrice=&facetNameValue=Licensed+Characters_value_Captain+Marvel"),
        ("Care Bears", "https://www.4sgm.com/lsearch.jhtm?cid=&noKeywords=true&keywords=&minPrice=&maxPrice=&facetNameValue=Licensed+Characters_value_Care+Bears"),
        ("Cars", "https://www.4sgm.com/lsearch.jhtm?cid=&noKeywords=true&keywords=&minPrice=&maxPrice=&facetNameValue=Licensed+Characters_value_Cars"),
        ("Cars 3", "https://www.4sgm.com/lsearch.jhtm?cid=&noKeywords=true&keywords=&minPrice=&maxPrice=&facetNameValue=Licensed+Characters_value_Cars+3"),
        ("Cinderella", "https://www.4sgm.com/lsearch.jhtm?cid=&noKeywords=true&keywords=&minPrice=&maxPrice=&facetNameValue=Licensed+Characters_value_Cinderella"),
        ("Coca-Cola", "https://www.4sgm.com/lsearch.jhtm?cid=&noKeywords=true&keywords=&minPrice=&maxPrice=&facetNameValue=Licensed+Characters_value_Coca-Cola"),
        ("Coco", "https://www.4sgm.com/lsearch.jhtm?cid=&noKeywords=true&keywords=&minPrice=&maxPrice=&facetNameValue=Licensed+Characters_value_Coco"),
        ("Corona", "https://www.4sgm.com/lsearch.jhtm?cid=&noKeywords=true&keywords=&minPrice=&maxPrice=&facetNameValue=Licensed+Characters_value_Corona"),
        ("Crayola", "https://www.4sgm.com/lsearch.jhtm?cid=&noKeywords=true&keywords=&minPrice=&maxPrice=&facetNameValue=Licensed+Characters_value_Crayola"),
        ("Critical", "https://www.4sgm.com/lsearch.jhtm?cid=&noKeywords=true&keywords=&minPrice=&maxPrice=&facetNameValue=Licensed+Characters_value_Critical"),
        ("Cyberpunk", "https://www.4sgm.com/lsearch.jhtm?cid=&noKeywords=true&keywords=&minPrice=&maxPrice=&facetNameValue=Licensed+Characters_value_Cyberpunk")
    ],
    "D": [
        ("Daredevil", "https://www.4sgm.com/lsearch.jhtm?cid=&noKeywords=true&keywords=&minPrice=&maxPrice=&facetNameValue=Licensed+Characters_value_Daredevil"),
        ("Darth Vader", "https://www.4sgm.com/lsearch.jhtm?cid=&noKeywords=true&keywords=&minPrice=&maxPrice=&facetNameValue=Licensed+Characters_value_Darth+Vader"),
        ("DC Comics", "https://www.4sgm.com/lsearch.jhtm?cid=&noKeywords=true&keywords=&minPrice=&maxPrice=&facetNameValue=Licensed+Characters_value_DC+Comics"),
        ("DC Super Hero Girls", "https://www.4sgm.com/lsearch.jhtm?cid=&noKeywords=true&keywords=&minPrice=&maxPrice=&facetNameValue=Licensed+Characters_value_DC+Super+Hero+Girls"),
        ("Despicable Me", "https://www.4sgm.com/lsearch.jhtm?cid=&noKeywords=true&keywords=&minPrice=&maxPrice=&facetNameValue=Licensed+Characters_value_Despicable+Me"),
        ("Disney", "https://www.4sgm.com/lsearch.jhtm?cid=&noKeywords=true&keywords=&minPrice=&maxPrice=&facetNameValue=Licensed+Characters_value_Disney"),
        ("Disney 100", "https://www.4sgm.com/lsearch.jhtm?cid=&noKeywords=true&keywords=&minPrice=&maxPrice=&facetNameValue=Licensed+Characters_value_Disney+100"),
        ("Disney Ariel", "https://www.4sgm.com/lsearch.jhtm?cid=&noKeywords=true&keywords=&minPrice=&maxPrice=&facetNameValue=Licensed+Characters_value_Disney+Ariel"),
        ("Disney Baby", "https://www.4sgm.com/lsearch.jhtm?cid=&noKeywords=true&keywords=&minPrice=&maxPrice=&facetNameValue=Licensed+Characters_value_Disney+Baby"),
        ("Disney Junior", "https://www.4sgm.com/lsearch.jhtm?cid=&noKeywords=true&keywords=&minPrice=&maxPrice=&facetNameValue=Licensed+Characters_value_Disney+Junior"),
        ("Disney Princess", "https://www.4sgm.com/lsearch.jhtm?cid=&noKeywords=true&keywords=&minPrice=&maxPrice=&facetNameValue=Licensed+Characters_value_Disney+Princess"),
        ("Disney Ralph Breaks the Internet", "https://www.4sgm.com/lsearch.jhtm?cid=&noKeywords=true&keywords=&minPrice=&maxPrice=&facetNameValue=Licensed+Characters_value_Disney+Ralph+Breaks+the+Intern"),
        ("Doctor Octopus", "https://www.4sgm.com/lsearch.jhtm?cid=&noKeywords=true&keywords=&minPrice=&maxPrice=&facetNameValue=Licensed+Characters_value_Doctor+Octopus"),
        ("Doctor Strange", "https://www.4sgm.com/lsearch.jhtm?cid=&noKeywords=true&keywords=&minPrice=&maxPrice=&facetNameValue=Licensed+Characters_value_Doctor+Strange"),
        ("Dora", "https://www.4sgm.com/lsearch.jhtm?cid=&noKeywords=true&keywords=&minPrice=&maxPrice=&facetNameValue=Licensed+Characters_value_Dora"),
        ("DreamWorks", "https://www.4sgm.com/lsearch.jhtm?cid=&noKeywords=true&keywords=&minPrice=&maxPrice=&facetNameValue=Licensed+Characters_value_DreamWorks")
    ],
    "E": [
        ("Elmo", "https://www.4sgm.com/lsearch.jhtm?cid=&noKeywords=true&keywords=&minPrice=&maxPrice=&facetNameValue=Licensed+Characters_value_Elmo"),
        ("Encanto", "https://www.4sgm.com/lsearch.jhtm?cid=&noKeywords=true&keywords=&minPrice=&maxPrice=&facetNameValue=Licensed+Characters_value_Encanto")
    ],
    "F": [
        ("Falcon", "https://www.4sgm.com/lsearch.jhtm?cid=&noKeywords=true&keywords=&minPrice=&maxPrice=&facetNameValue=Licensed+Characters_value_Falcon"),
        ("Fanta", "https://www.4sgm.com/lsearch.jhtm?cid=&noKeywords=true&keywords=&minPrice=&maxPrice=&facetNameValue=Licensed+Characters_value_Fanta"),
        ("Fisher-Price", "https://www.4sgm.com/lsearch.jhtm?cid=&noKeywords=true&keywords=&minPrice=&maxPrice=&facetNameValue=Licensed+Characters_value_Fisher-Price"),
        ("FORTNITE", "https://www.4sgm.com/lsearch.jhtm?cid=&noKeywords=true&keywords=&minPrice=&maxPrice=&facetNameValue=Licensed+Characters_value_FORTNITE"),
        ("Friends", "https://www.4sgm.com/lsearch.jhtm?cid=&noKeywords=true&keywords=&minPrice=&maxPrice=&facetNameValue=Licensed+Characters_value_Friends"),
        ("Frozen", "https://www.4sgm.com/lsearch.jhtm?cid=&noKeywords=true&keywords=&minPrice=&maxPrice=&facetNameValue=Licensed+Characters_value_Frozen"),
        ("Frozen 2", "https://www.4sgm.com/lsearch.jhtm?cid=&noKeywords=true&keywords=&minPrice=&maxPrice=&facetNameValue=Licensed+Characters_value_Frozen+2")
    ],
    "G": [
        ("G.I.Joe", "https://www.4sgm.com/lsearch.jhtm?cid=&noKeywords=true&keywords=&minPrice=&maxPrice=&facetNameValue=Licensed+Characters_value_G.I.Joe"),
        ("GPK", "https://www.4sgm.com/lsearch.jhtm?cid=&noKeywords=true&keywords=&minPrice=&maxPrice=&facetNameValue=Licensed+Characters_value_GPK"),
        ("Grogu", "https://www.4sgm.com/lsearch.jhtm?cid=&noKeywords=true&keywords=&minPrice=&maxPrice=&facetNameValue=Licensed+Characters_value_Grogu")
    ],
    "H": [
        ("Harry Potter", "https://www.4sgm.com/lsearch.jhtm?cid=&noKeywords=true&keywords=&minPrice=&maxPrice=&facetNameValue=Licensed+Characters_value_Harry+Potter"),
        ("Hasbro", "https://www.4sgm.com/lsearch.jhtm?cid=&noKeywords=true&keywords=&minPrice=&maxPrice=&facetNameValue=Licensed+Characters_value_Hasbro"),
        ("Hawkeye", "https://www.4sgm.com/lsearch.jhtm?cid=&noKeywords=true&keywords=&minPrice=&maxPrice=&facetNameValue=Licensed+Characters_value_Hawkeye"),
        ("Hello Kitty", "https://www.4sgm.com/lsearch.jhtm?cid=&noKeywords=true&keywords=&minPrice=&maxPrice=&facetNameValue=Licensed+Characters_value_Hello+Kitty"),
        ("He-Man", "https://www.4sgm.com/lsearch.jhtm?cid=&noKeywords=true&keywords=&minPrice=&maxPrice=&facetNameValue=Licensed+Characters_value_He-Man"),
        ("Hercules", "https://www.4sgm.com/lsearch.jhtm?cid=&noKeywords=true&keywords=&minPrice=&maxPrice=&facetNameValue=Licensed+Characters_value_Hercules"),
        ("Heroes", "https://www.4sgm.com/lsearch.jhtm?cid=&noKeywords=true&keywords=&minPrice=&maxPrice=&facetNameValue=Licensed+Characters_value_Heroes"),
        ("Hot Wheels", "https://www.4sgm.com/lsearch.jhtm?cid=&noKeywords=true&keywords=&minPrice=&maxPrice=&facetNameValue=Licensed+Characters_value_Hot+Wheels"),
        ("Hulk", "https://www.4sgm.com/lsearch.jhtm?cid=&noKeywords=true&keywords=&minPrice=&maxPrice=&facetNameValue=Licensed+Characters_value_Hulk")
    ],
    "I": [
        ("Incredibles", "https://www.4sgm.com/lsearch.jhtm?cid=&noKeywords=true&keywords=&minPrice=&maxPrice=&facetNameValue=Licensed+Characters_value_Incredibles"),
        ("Infinity", "https://www.4sgm.com/lsearch.jhtm?cid=&noKeywords=true&keywords=&minPrice=&maxPrice=&facetNameValue=Licensed+Characters_value_Infinity"),
        ("Iron Fist", "https://www.4sgm.com/lsearch.jhtm?cid=&noKeywords=true&keywords=&minPrice=&maxPrice=&facetNameValue=Licensed+Characters_value_Iron+Fist"),
        ("Iron Man", "https://www.4sgm.com/lsearch.jhtm?cid=&noKeywords=true&keywords=&minPrice=&maxPrice=&facetNameValue=Licensed+Characters_value_Iron+Man"),
        ("IRONMAN", "https://www.4sgm.com/lsearch.jhtm?cid=&noKeywords=true&keywords=&minPrice=&maxPrice=&facetNameValue=Licensed+Characters_value_IRONMAN")
    ],
        "J": [
        ("Jasmine", "https://www.4sgm.com/lsearch.jhtm?cid=&noKeywords=true&keywords=&minPrice=&maxPrice=&facetNameValue=Licensed+Characters_value_Jasmine"),
        ("Jiggles", "https://www.4sgm.com/lsearch.jhtm?cid=&noKeywords=true&keywords=&minPrice=&maxPrice=&facetNameValue=Licensed+Characters_value_Jiggles"),
        ("JojoSiwa", "https://www.4sgm.com/lsearch.jhtm?cid=&noKeywords=true&keywords=&minPrice=&maxPrice=&facetNameValue=Licensed+Characters_value_JojoSiwa"),
        ("Jungle Book", "https://www.4sgm.com/lsearch.jhtm?cid=&noKeywords=true&keywords=&minPrice=&maxPrice=&facetNameValue=Licensed+Characters_value_Jungle+Book"),
        ("Jurassic Park", "https://www.4sgm.com/lsearch.jhtm?cid=&noKeywords=true&keywords=&minPrice=&maxPrice=&facetNameValue=Licensed+Characters_value_Jurassic+Park"),
        ("Justice League", "https://www.4sgm.com/lsearch.jhtm?cid=&noKeywords=true&keywords=&minPrice=&maxPrice=&facetNameValue=Licensed+Characters_value_Justice+League")
    ],
    "L": [
        ("Lady and the Tramp", "https://www.4sgm.com/lsearch.jhtm?cid=&noKeywords=true&keywords=&minPrice=&maxPrice=&facetNameValue=Licensed+Characters_value_Lady+and+the+Tramp"),
        ("Lightyear", "https://www.4sgm.com/lsearch.jhtm?cid=&noKeywords=true&keywords=&minPrice=&maxPrice=&facetNameValue=Licensed+Characters_value_Lightyear"),
        ("Lion King", "https://www.4sgm.com/lsearch.jhtm?cid=&noKeywords=true&keywords=&minPrice=&maxPrice=&facetNameValue=Licensed+Characters_value_Lion+King"),
        ("Little Mimos", "https://www.4sgm.com/lsearch.jhtm?cid=&noKeywords=true&keywords=&minPrice=&maxPrice=&facetNameValue=Licensed+Characters_value_Little+Mimos"),
        ("LOL Surp", "https://www.4sgm.com/lsearch.jhtm?cid=&noKeywords=true&keywords=&minPrice=&maxPrice=&facetNameValue=Licensed+Characters_value_LOL+Surp"),
        ("Looney Tunes", "https://www.4sgm.com/lsearch.jhtm?cid=&noKeywords=true&keywords=&minPrice=&maxPrice=&facetNameValue=Licensed+Characters_value_Looney+Tunes"),
        ("Lucasfilm", "https://www.4sgm.com/lsearch.jhtm?cid=&noKeywords=true&keywords=&minPrice=&maxPrice=&facetNameValue=Licensed+Characters_value_Lucasfilm")
    ],
    "M": [
        ("Mandalorian", "https://www.4sgm.com/lsearch.jhtm?cid=&noKeywords=true&keywords=&minPrice=&maxPrice=&facetNameValue=Licensed+Characters_value_Mandalorian"),
        ("Mario", "https://www.4sgm.com/lsearch.jhtm?cid=&noKeywords=true&keywords=&minPrice=&maxPrice=&facetNameValue=Licensed+Characters_value_Mario"),
        ("Marvel", "https://www.4sgm.com/lsearch.jhtm?cid=&noKeywords=true&keywords=&minPrice=&maxPrice=&facetNameValue=Licensed+Characters_value_Marvel"),
        ("Mattel", "https://www.4sgm.com/lsearch.jhtm?cid=&noKeywords=true&keywords=&minPrice=&maxPrice=&facetNameValue=Licensed+Characters_value_Mattel"),
        ("Merida", "https://www.4sgm.com/lsearch.jhtm?cid=&noKeywords=true&keywords=&minPrice=&maxPrice=&facetNameValue=Licensed+Characters_value_Merida"),
        ("Mickey Mouse & Friends", "https://www.4sgm.com/lsearch.jhtm?cid=&noKeywords=true&keywords=&minPrice=&maxPrice=&facetNameValue=Licensed+Characters_value_Mickey+Mouse+%26+Friends"),
        ("Miles Morales", "https://www.4sgm.com/lsearch.jhtm?cid=&noKeywords=true&keywords=&minPrice=&maxPrice=&facetNameValue=Licensed+Characters_value_Miles+Morales"),
        ("Minis", "https://www.4sgm.com/lsearch.jhtm?cid=&noKeywords=true&keywords=&minPrice=&maxPrice=&facetNameValue=Licensed+Characters_value_Minis"),
        ("Minnie Mouse", "https://www.4sgm.com/lsearch.jhtm?cid=&noKeywords=true&keywords=&minPrice=&maxPrice=&facetNameValue=Licensed+Characters_value_Minnie+Mouse"),
        ("Miraculous", "https://www.4sgm.com/lsearch.jhtm?cid=&noKeywords=true&keywords=&minPrice=&maxPrice=&facetNameValue=Licensed+Characters_value_Miraculous"),
        ("Moana", "https://www.4sgm.com/lsearch.jhtm?cid=&noKeywords=true&keywords=&minPrice=&maxPrice=&facetNameValue=Licensed+Characters_value_Moana"),
        ("Modelo", "https://www.4sgm.com/lsearch.jhtm?cid=&noKeywords=true&keywords=&minPrice=&maxPrice=&facetNameValue=Licensed+Characters_value_Modelo"),
        ("Modok", "https://www.4sgm.com/lsearch.jhtm?cid=&noKeywords=true&keywords=&minPrice=&maxPrice=&facetNameValue=Licensed+Characters_value_Modok"),
        ("Monster High", "https://www.4sgm.com/lsearch.jhtm?cid=&noKeywords=true&keywords=&minPrice=&maxPrice=&facetNameValue=Licensed+Characters_value_Monster+Hi"),
        ("Mortal", "https://www.4sgm.com/lsearch.jhtm?cid=&noKeywords=true&keywords=&minPrice=&maxPrice=&facetNameValue=Licensed+Characters_value_Mortal"),
        ("Mulan", "https://www.4sgm.com/lsearch.jhtm?cid=&noKeywords=true&keywords=&minPrice=&maxPrice=&facetNameValue=Licensed+Characters_value_Mulan"),
        ("My Disney Nursery", "https://www.4sgm.com/lsearch.jhtm?cid=&noKeywords=true&keywords=&minPrice=&maxPrice=&facetNameValue=Licensed+Characters_value_My+Disney+Nursery"),
        ("My Hero", "https://www.4sgm.com/lsearch.jhtm?cid=&noKeywords=true&keywords=&minPrice=&maxPrice=&facetNameValue=Licensed+Characters_value_My+Hero"),
        ("My Little Pony", "https://www.4sgm.com/lsearch.jhtm?cid=&noKeywords=true&keywords=&minPrice=&maxPrice=&facetNameValue=Licensed+Characters_value_My+Little+Pony")
    ],
    "N": [
        ("New Groove", "https://www.4sgm.com/lsearch.jhtm?cid=&noKeywords=true&keywords=&minPrice=&maxPrice=&facetNameValue=Licensed+Characters_value_New+Groove"),
        ("Nickelodeon", "https://www.4sgm.com/lsearch.jhtm?cid=&noKeywords=true&keywords=&minPrice=&maxPrice=&facetNameValue=Licensed+Characters_value_Nickelodeon"),
        ("Nightmare", "https://www.4sgm.com/lsearch.jhtm?cid=&noKeywords=true&keywords=&minPrice=&maxPrice=&facetNameValue=Licensed+Characters_value_Nightmare"),
        ("Ninja Turtles", "https://www.4sgm.com/lsearch.jhtm?cid=&noKeywords=true&keywords=&minPrice=&maxPrice=&facetNameValue=Licensed+Characters_value_Ninja+Turtles")
    ],
    "O": [
        ("Onward", "https://www.4sgm.com/lsearch.jhtm?cid=&noKeywords=true&keywords=&minPrice=&maxPrice=&facetNameValue=Licensed+Characters_value_Onward")
    ],
    "P": [
        ("Paw Patrol", "https://www.4sgm.com/lsearch.jhtm?cid=&noKeywords=true&keywords=&minPrice=&maxPrice=&facetNameValue=Licensed+Characters_value_Paw+Patrol"),
        ("Peanuts", "https://www.4sgm.com/lsearch.jhtm?cid=&noKeywords=true&keywords=&minPrice=&maxPrice=&facetNameValue=Licensed+Characters_value_Peanuts"),
        ("Peppa Pig", "https://www.4sgm.com/lsearch.jhtm?cid=&noKeywords=true&keywords=&minPrice=&maxPrice=&facetNameValue=Licensed+Characters_value_Peppa+Pig"),
        ("Peter Pan", "https://www.4sgm.com/lsearch.jhtm?cid=&noKeywords=true&keywords=&minPrice=&maxPrice=&facetNameValue=Licensed+Characters_value_Peter+Pan"),
        ("Pixar", "https://www.4sgm.com/lsearch.jhtm?cid=&noKeywords=true&keywords=&minPrice=&maxPrice=&facetNameValue=Licensed+Characters_value_Pixar"),
        ("PJ Masks", "https://www.4sgm.com/lsearch.jhtm?cid=&noKeywords=true&keywords=&minPrice=&maxPrice=&facetNameValue=Licensed+Characters_value_PJ+Masks"),
        ("PlaySkool", "https://www.4sgm.com/lsearch.jhtm?cid=&noKeywords=true&keywords=&minPrice=&maxPrice=&facetNameValue=Licensed+Characters_value_PlaySkool"),
        ("Pokemon", "https://www.4sgm.com/lsearch.jhtm?cid=&noKeywords=true&keywords=&minPrice=&maxPrice=&facetNameValue=Licensed+Characters_value_Pokemon"),
        ("Power Rangers", "https://www.4sgm.com/lsearch.jhtm?cid=&noKeywords=true&keywords=&minPrice=&maxPrice=&facetNameValue=Licensed+Characters_value_Power+Rangers"),
        ("Princess The Frog", "https://www.4sgm.com/lsearch.jhtm?cid=&noKeywords=true&keywords=&minPrice=&maxPrice=&facetNameValue=Licensed+Characters_value_Princess+The+Frog")
    ],
    "R": [
        ("Rapunzel", "https://www.4sgm.com/lsearch.jhtm?cid=&noKeywords=true&keywords=&minPrice=&maxPrice=&facetNameValue=Licensed+Characters_value_Rapunzel"),
        ("Remix", "https://www.4sgm.com/lsearch.jhtm?cid=&noKeywords=true&keywords=&minPrice=&maxPrice=&facetNameValue=Licensed+Characters_value_Remix"),
        ("Rhino", "https://www.4sgm.com/lsearch.jhtm?cid=&noKeywords=true&keywords=&minPrice=&maxPrice=&facetNameValue=Licensed+Characters_value_Rhino"),
        ("Robin Hood", "https://www.4sgm.com/lsearch.jhtm?cid=&noKeywords=true&keywords=&minPrice=&maxPrice=&facetNameValue=Licensed+Characters_value_Robin+Hood"),
        ("Rocket Raccoon", "https://www.4sgm.com/lsearch.jhtm?cid=&noKeywords=true&keywords=&minPrice=&maxPrice=&facetNameValue=Licensed+Characters_value_Rocket+Raccoon"),
        ("Rugrats", "https://www.4sgm.com/lsearch.jhtm?cid=&noKeywords=true&keywords=&minPrice=&maxPrice=&facetNameValue=Licensed+Characters_value_Rugrats")
    ],
    "S": [
        ("Santa", "https://www.4sgm.com/lsearch.jhtm?cid=&noKeywords=true&keywords=&minPrice=&maxPrice=&facetNameValue=Licensed+Characters_value_Santa"),
        ("Scarlet Witch", "https://www.4sgm.com/lsearch.jhtm?cid=&noKeywords=true&keywords=&minPrice=&maxPrice=&facetNameValue=Licensed+Characters_value_Scarlet+Witch"),
        ("Scooby-Doo", "https://www.4sgm.com/lsearch.jhtm?cid=&noKeywords=true&keywords=&minPrice=&maxPrice=&facetNameValue=Licensed+Characters_value_Scooby-Doo"),
        ("Sesame Street", "https://www.4sgm.com/lsearch.jhtm?cid=&noKeywords=true&keywords=&minPrice=&maxPrice=&facetNameValue=Licensed+Characters_value_Sesame+Street"),
        ("She-Hulk", "https://www.4sgm.com/lsearch.jhtm?cid=&noKeywords=true&keywords=&minPrice=&maxPrice=&facetNameValue=Licensed+Characters_value_She-Hulk"),
        ("Snoopy", "https://www.4sgm.com/lsearch.jhtm?cid=&noKeywords=true&keywords=&minPrice=&maxPrice=&facetNameValue=Licensed+Characters_value_Snoopy"),
        ("Snow White", "https://www.4sgm.com/lsearch.jhtm?cid=&noKeywords=true&keywords=&minPrice=&maxPrice=&facetNameValue=Licensed+Characters_value_Snow+White"),
        ("Snowman", "https://www.4sgm.com/lsearch.jhtm?cid=&noKeywords=true&keywords=&minPrice=&maxPrice=&facetNameValue=Licensed+Characters_value_Snowman"),
        ("SONIC", "https://www.4sgm.com/lsearch.jhtm?cid=&noKeywords=true&keywords=&minPrice=&maxPrice=&facetNameValue=Licensed+Characters_value_SONIC"),
        ("Soul", "https://www.4sgm.com/lsearch.jhtm?cid=&noKeywords=true&keywords=&minPrice=&maxPrice=&facetNameValue=Licensed+Characters_value_Soul"),
        ("Spiderman", "https://www.4sgm.com/lsearch.jhtm?cid=&noKeywords=true&keywords=&minPrice=&maxPrice=&facetNameValue=Licensed+Characters_value_Spiderman"),
        ("Spider-Woman", "https://www.4sgm.com/lsearch.jhtm?cid=&noKeywords=true&keywords=&minPrice=&maxPrice=&facetNameValue=Licensed+Characters_value_Spider-Woman"),
        ("Sponge Bob", "https://www.4sgm.com/lsearch.jhtm?cid=&noKeywords=true&keywords=&minPrice=&maxPrice=&facetNameValue=Licensed+Characters_value_Sponge+Bob"),
        ("Sprite", "https://www.4sgm.com/lsearch.jhtm?cid=&noKeywords=true&keywords=&minPrice=&maxPrice=&facetNameValue=Licensed+Characters_value_Sprite"),
        ("Star Wars", "https://www.4sgm.com/lsearch.jhtm?cid=&noKeywords=true&keywords=&minPrice=&maxPrice=&facetNameValue=Licensed+Characters_value_Star+Wars"),
        ("Star-Lord", "https://www.4sgm.com/lsearch.jhtm?cid=&noKeywords=true&keywords=&minPrice=&maxPrice=&facetNameValue=Licensed+Characters_value_Star-Lord"),
        ("Stitch", "https://www.4sgm.com/lsearch.jhtm?cid=&noKeywords=true&keywords=&minPrice=&maxPrice=&facetNameValue=Licensed+Characters_value_Stitch"),
        ("Strawberry Shortcake", "https://www.4sgm.com/lsearch.jhtm?cid=&noKeywords=true&keywords=&minPrice=&maxPrice=&facetNameValue=Licensed+Characters_value_Strawberry+Shortcake"),
        ("Superman", "https://www.4sgm.com/lsearch.jhtm?cid=&noKeywords=true&keywords=&minPrice=&maxPrice=&facetNameValue=Licensed+Characters_value_Superman")
    ],
    "T": [
        ("Thanos", "https://www.4sgm.com/lsearch.jhtm?cid=&noKeywords=true&keywords=&minPrice=&maxPrice=&facetNameValue=Licensed+Characters_value_Thanos"),
        ("The Jetson", "https://www.4sgm.com/lsearch.jhtm?cid=&noKeywords=true&keywords=&minPrice=&maxPrice=&facetNameValue=Licensed+Characters_value_The+Jetson"),
        ("Thomas & Friends", "https://www.4sgm.com/lsearch.jhtm?cid=&noKeywords=true&keywords=&minPrice=&maxPrice=&facetNameValue=Licensed+Characters_value_Thomas+%26+Friends"),
        ("Thomas the Train", "https://www.4sgm.com/lsearch.jhtm?cid=&noKeywords=true&keywords=&minPrice=&maxPrice=&facetNameValue=Licensed+Characters_value_Thomas+the+Train"),
        ("Thor", "https://www.4sgm.com/lsearch.jhtm?cid=&noKeywords=true&keywords=&minPrice=&maxPrice=&facetNameValue=Licensed+Characters_value_Thor"),
        ("Tiana", "https://www.4sgm.com/lsearch.jhtm?cid=&noKeywords=true&keywords=&minPrice=&maxPrice=&facetNameValue=Licensed+Characters_value_Tiana"),
        ("Tinkerbell", "https://www.4sgm.com/lsearch.jhtm?cid=&noKeywords=true&keywords=&minPrice=&maxPrice=&facetNameValue=Licensed+Characters_value_Tinkerbell"),
        ("Toy Story", "https://www.4sgm.com/lsearch.jhtm?cid=&noKeywords=true&keywords=&minPrice=&maxPrice=&facetNameValue=Licensed+Characters_value_Toy+Story"),
        ("Toy Story 4", "https://www.4sgm.com/lsearch.jhtm?cid=&noKeywords=true&keywords=&minPrice=&maxPrice=&facetNameValue=Licensed+Characters_value_Toy+Story+4"),
        ("Transformer", "https://www.4sgm.com/lsearch.jhtm?cid=&noKeywords=true&keywords=&minPrice=&maxPrice=&facetNameValue=Licensed+Characters_value_Transformer"),
        ("Trolls", "https://www.4sgm.com/lsearch.jhtm?cid=&noKeywords=true&keywords=&minPrice=&maxPrice=&facetNameValue=Licensed+Characters_value_Trolls"),
        ("Tweety", "https://www.4sgm.com/lsearch.jhtm?cid=&noKeywords=true&keywords=&minPrice=&maxPrice=&facetNameValue=Licensed+Characters_value_Tweety")
    ],
    "U": [
        ("Universal", "https://www.4sgm.com/lsearch.jhtm?cid=&noKeywords=true&keywords=&minPrice=&maxPrice=&facetNameValue=Licensed+Characters_value_Universal"),
        ("Up", "https://www.4sgm.com/lsearch.jhtm?cid=&noKeywords=true&keywords=&minPrice=&maxPrice=&facetNameValue=Licensed+Characters_value_Up")
    ],
    "V": [
        ("Vampirina", "https://www.4sgm.com/lsearch.jhtm?cid=&noKeywords=true&keywords=&minPrice=&maxPrice=&facetNameValue=Licensed+Characters_value_Vampirina"),
        ("Venom", "https://www.4sgm.com/lsearch.jhtm?cid=&noKeywords=true&keywords=&minPrice=&maxPrice=&facetNameValue=Licensed+Characters_value_Venom"),
        ("Vision", "https://www.4sgm.com/lsearch.jhtm?cid=&noKeywords=true&keywords=&minPrice=&maxPrice=&facetNameValue=Licensed+Characters_value_Vision")
    ],
    "W": [
        ("War Machine", "https://www.4sgm.com/lsearch.jhtm?cid=&noKeywords=true&keywords=&minPrice=&maxPrice=&facetNameValue=Licensed+Characters_value_War+Machine"),
        ("Warner Bros.", "https://www.4sgm.com/lsearch.jhtm?cid=&noKeywords=true&keywords=&minPrice=&maxPrice=&facetNameValue=Licensed+Characters_value_Warner+Bros."),
        ("Wasp", "https://www.4sgm.com/lsearch.jhtm?cid=&noKeywords=true&keywords=&minPrice=&maxPrice=&facetNameValue=Licensed+Characters_value_Wasp"),
        ("Winnie the Pooh", "https://www.4sgm.com/lsearch.jhtm?cid=&noKeywords=true&keywords=&minPrice=&maxPrice=&facetNameValue=Licensed+Characters_value_Winnie+the+Pooh"),
        ("Winter Soldier", "https://www.4sgm.com/lsearch.jhtm?cid=&noKeywords=true&keywords=&minPrice=&maxPrice=&facetNameValue=Licensed+Characters_value_Winter+Soldier"),
        ("Wolverine", "https://www.4sgm.com/lsearch.jhtm?cid=&noKeywords=true&keywords=&minPrice=&maxPrice=&facetNameValue=Licensed+Characters_value_Wolverine"),
        ("Wonder Woman", "https://www.4sgm.com/lsearch.jhtm?cid=&noKeywords=true&keywords=&minPrice=&maxPrice=&facetNameValue=Licensed+Characters_value_Wonder+Woman")
    ]
    }

import html
import os
import requests
from bs4 import BeautifulSoup
from dotenv import load_dotenv
import smtplib
from email.mime.multipart import MIMEMultipart
from email.mime.base import MIMEBase
from email import encoders
from tqdm import tqdm
import re

# Load environment variables from .env file
load_dotenv()

EMAIL_ADDRESS = os.getenv("EMAIL_ADDRESS")
EMAIL_PASSWORD = os.getenv("EMAIL_PASSWORD")
EMAIL_SERVER = os.getenv("EMAIL_SERVER")

# URL to scrape for top characters
URL = "https://www.4sgm.com/lsearch.jhtm?view=&sort=inventory_afs&size=24&page=1&noKeywords=true"

# Predefined color scheme for licensed characters
color_scheme = {
    "Disney": {"color": "#ffffff", "background": "#1e90ff", "border": "2px solid #00008b"},
    "Mattel": {"color": "#ffffff", "background": "#ff69b4", "border": "2px solid #ff4500"},
    "Mickey Mouse & Friends": {"color": "#ffffff", "background": "#ff0000", "border": "2px solid #ffd700"},
    "Hello Kitty": {"color": "#ffffff", "background": "#ff69b4", "border": "2px solid #ff1493"},
    "Sanrio": {"color": "#ffffff", "background": "#ff69b4", "border": "2px solid #000000"},
    "Warner Bros.": {"color": "#ffffff", "background": "#0000ff", "border": "2px solid #ff4500"},
    "Marvel": {"color": "#ffffff", "background": "#ff0000", "border": "2px solid #0000ff"},
    "DC Comics": {"color": "#ffffff", "background": "#000080", "border": "2px solid #ffd700"},
    "Disney Baby": {"color": "#ffffff", "background": "#add8e6", "border": "2px solid #00008b"},
    "Justice League": {"color": "#ffffff", "background": "#ff0000", "border": "2px solid #000000"},
    "Disney Princess": {"color": "#ffffff", "background": "#ff69b4", "border": "2px solid #ffd700"},
    "Nickelodeon": {"color": "#ffffff", "background": "#ff8c00", "border": "2px solid #008000"},
    "Hasbro": {"color": "#ffffff", "background": "#add8e6", "border": "2px solid #000080"},
    "Fisher Price": {"color": "#ffffff", "background": "#ff6347", "border": "2px solid #4682b4"},
    "Pixar": {"color": "#ffffff", "background": "#add8e6", "border": "2px solid #0000ff"},
    "Spider-Man": {"color": "#ffffff", "background": "#ff0000", "border": "2px solid #0033cc"},
    "Sony": {"color": "#ffffff", "background": "#000000", "border": "2px solid #ffffff"},
    "Santa": {"color": "#ffffff", "background": "#ff0000", "border": "2px solid #00ff00"},
    "Star Wars": {"color": "#ffffff", "background": "#000000", "border": "2px solid #ffffff"},
    "Disney Junior": {"color": "#ffffff", "background": "#ff69b4", "border": "2px solid #ff4500"}
}

def sanitize_class_name(name):
    # Replace problematic characters with hyphens or other safe characters
    return name.replace(".", "-").replace("&", "and").replace(" ", "-")

# Scrape function to get top licensed characters based on product counts
def scrape_top_characters(url):
    print("Scraping top licensed characters from URL...")
    response = requests.get(url)
    soup = BeautifulSoup(response.content, 'html.parser')

    # Locate the specific 'Licensed Characters' section
    filter_sections = soup.find_all('div', class_='luceneSearchFilter')

    licensed_characters_section = None
    for section in filter_sections:
        # Find the 'Licensed Characters' filter based on the title
        filter_title = section.find('div', class_='filterTitleToggle')
        if filter_title and 'Licensed Characters' in filter_title.text:
            licensed_characters_section = section
            break

    if not licensed_characters_section:
        print("Licensed characters section not found!")
        return []

    # Extract character names and counts from the Licensed Characters section
    characters = []
    divs = licensed_characters_section.find_all('div', class_='filterValue')

    for div in divs:
        label = div.find('label')
        if label:
            # Extract the character name
            char_name = label.contents[2].strip()  # Get the character name from label text
            span_tag = label.find('span', class_='filterValueCount')
            if span_tag:
                # Extract and clean up the inventory count
                inventory_count = int(span_tag.text.strip().replace('(', '').replace(')', ''))
                characters.append((char_name, inventory_count))

    # Sort characters by inventory count, return the top 20
    sorted_characters = sorted(characters, key=lambda x: x[1], reverse=True)[:20]
    return sorted_characters

def generate_css(characters):
    css = "<style>\n"
    
    # Generate CSS for each character using predefined color scheme or default styling
    for character, _ in characters:
        class_name = sanitize_class_name(character)  # Use the sanitize function here
        if character in color_scheme:
            color = color_scheme[character]['color']
            background = color_scheme[character]['background']
            border = color_scheme[character]['border']

            # Add a comment for each character section
            css += f"/* {character} */\n"
            css += f""".{class_name} {{
                color: {color} !important;
                background-color: {background} !important;
                border: 2px solid {border} !important;
            }}\n"""
        else:
            # Default styling for characters not in the predefined scheme
            css += f"/* {character} (Default Styling) */\n"
            css += f""".{class_name} {{
                color: #000000 !important;
                background-color: #f0f0f0 !important;
                border: 2px solid #cccccc !important;
            }}\n"""

    css += "</style>\n"
    return css



# Generate HTML with predefined licensed characters and popular characters at the top
import html

def generate_html(top_characters, character_sections):
    print("Generating HTML...")

    html_content = ""  # Initialize html_content properly

    # Only highlight the top 20 characters if they are in the predefined list
    highlighted_characters = set([char[0] for char in top_characters])

    # Start building the HTML content
    html_content += """
    <div class="container">
      <h1>Popular Licensed Characters</h1>
      <div class="popular-characters" style="display: flex; flex-wrap: wrap; gap: 10px;">
    """
    
    # Generate the "tag cloud" style display for top 20 characters
    for character, _ in top_characters:
        class_name = character.lower().replace(" ", "-").replace(".", "")  # Fix class name for characters like Warner Bros.
        html_content += f'<a href="#" class="{html.escape(class_name)}" style="padding: 5px; border-radius: 5px;">{html.escape(character)}</a> '

    html_content += "</div><h2>All Licensed Characters</h2><div class='row'>"

    # Generate HTML for each section, highlighting top 20 characters
    for section, characters in character_sections.items():
        html_content += f'<div class="col-sm-4"><h2 id="{html.escape(section)}">{html.escape(section)}</h2><ul class="character-list">'
        
        for character, url in characters:
            class_name = character.lower().replace(" ", "-").replace(".", "")  # Ensure the class name is valid
            # Highlight class if the character is in the top 20 list
            highlighted_class = class_name if character in highlighted_characters else ""
            html_content += f'<li><a href="{html.escape(url)}" class="{html.escape(highlighted_class)}">{html.escape(character)}</a></li>'
        
        html_content += "</ul></div>"

    html_content += "</div></div>"
    return html_content


# Write HTML content to a file
def write_html_to_file(html_content, filename='licensed_characters.html'):
    with open(filename, 'w') as file:
        file.write(html_content)
    print(f"HTML content has been written to {filename}")

# Send email with the HTML file attached
def send_email(subject, filename):
    print("Sending email with HTML file attached...")

    # Create the email
    msg = MIMEMultipart()
    msg['From'] = EMAIL_ADDRESS
    msg['To'] = 'rona@4sgm.com'
    msg['Subject'] = subject

    # Attach the HTML file
    with open(filename, 'rb') as file:
        part = MIMEBase('application', 'octet-stream')
        part.set_payload(file.read())
        encoders.encode_base64(part)
        part.add_header('Content-Disposition', f'attachment; filename={filename}')
        msg.attach(part)

    try:
        with smtplib.SMTP(EMAIL_SERVER, 587) as server:
            server.starttls()
            server.login(EMAIL_ADDRESS, EMAIL_PASSWORD)
            server.send_message(msg)
            print("Email sent successfully!")
    except Exception as e:
        print(f"Failed to send email: {e}")

# Main function
def main():
    with tqdm(total=100, desc="Scraping and generating data", leave=False, dynamic_ncols=True) as pbar:
        # Scrape the top 20 characters
        top_characters = scrape_top_characters(URL)
        pbar.update(50)

        # Generate CSS and HTML with highlighted top 20 characters
        css_content = generate_css(top_characters)
        # Pass both top_characters and character_sections to generate_html
        html_content = css_content + generate_html(top_characters, character_sections)
        pbar.update(30)

        # Write the HTML to a file
        write_html_to_file(html_content)
        pbar.update(10)

        # Send the email with the HTML file attached (this line is commented out)
        # send_email("Top 20 Licensed Characters", 'licensed_characters.html')
        pbar.update(10)


if __name__ == "__main__":
    main()
